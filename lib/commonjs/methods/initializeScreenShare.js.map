{"version":3,"names":["_BBBN_ScreenShareService","require","_emitter","_interopRequireDefault","e","__esModule","default","resolve","a","console","log","nativeEmitter","addListener","initializeScreenShare","instanceId","Promise","res","rej","nativeInitializeScreenShare","_default","exports"],"sources":["initializeScreenShare.tsx"],"sourcesContent":["import { initializeScreenShare as nativeInitializeScreenShare } from '../native-components/BBBN_ScreenShareService';\nimport nativeEmitter from '../native-messaging/emitter';\n\n// Reference to the resolver of last call\nlet resolve = (a: String | null) => {\n  console.log(\n    `default resolve function called, this should never happen: ${a}`\n  );\n};\n\n// Log a message when broadcast is requested\nnativeEmitter.addListener('onBroadcastRequested', () => {\n  console.log(`Broadcast requested`);\n});\n\n// Resolve promise when broadcast is started (this event means that user confirmed the screenshare)\nnativeEmitter.addListener('onBroadcastStarted', () => {\n  console.log(`Broadcast onBroadcastStarted`);\n  resolve(null);\n});\n\n// Entry point of this method\nfunction initializeScreenShare(instanceId: Number) {\n  return new Promise((res, rej) => {\n    // store the resolver for later call (when event is received)\n    resolve = res;\n\n    try {\n      // call native swift method that triggers the broadcast popup\n      console.log(`[${instanceId}] - >nativeInitializeScreenShare`);\n      nativeInitializeScreenShare();\n    } catch (e) {\n      rej(`Call to nativeInitializeScreenShare failed zzy`);\n    }\n  });\n}\n\nexport default initializeScreenShare;\n"],"mappings":";;;;;;AAAA,IAAAA,wBAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAwD,SAAAE,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAExD;AACA,IAAIG,OAAO,GAAIC,CAAgB,IAAK;EAClCC,OAAO,CAACC,GAAG,CACT,8DAA8DF,CAAC,EACjE,CAAC;AACH,CAAC;;AAED;AACAG,gBAAa,CAACC,WAAW,CAAC,sBAAsB,EAAE,MAAM;EACtDH,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;AACpC,CAAC,CAAC;;AAEF;AACAC,gBAAa,CAACC,WAAW,CAAC,oBAAoB,EAAE,MAAM;EACpDH,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;EAC3CH,OAAO,CAAC,IAAI,CAAC;AACf,CAAC,CAAC;;AAEF;AACA,SAASM,qBAAqBA,CAACC,UAAkB,EAAE;EACjD,OAAO,IAAIC,OAAO,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;IAC/B;IACAV,OAAO,GAAGS,GAAG;IAEb,IAAI;MACF;MACAP,OAAO,CAACC,GAAG,CAAC,IAAII,UAAU,kCAAkC,CAAC;MAC7D,IAAAI,8CAA2B,EAAC,CAAC;IAC/B,CAAC,CAAC,OAAOd,CAAC,EAAE;MACVa,GAAG,CAAC,gDAAgD,CAAC;IACvD;EACF,CAAC,CAAC;AACJ;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAd,OAAA,GAEcO,qBAAqB","ignoreList":[]}