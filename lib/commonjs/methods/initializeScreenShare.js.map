{"version":3,"names":["resolve","a","console","log","nativeEmitter","addListener","initializeScreenShare","instanceId","Promise","res","rej","nativeInitializeScreenShare","e"],"sources":["initializeScreenShare.tsx"],"sourcesContent":["import { initializeScreenShare as nativeInitializeScreenShare } from '../native-components/BBBN_ScreenShareService';\nimport nativeEmitter from '../native-messaging/emitter';\n\n// Reference to the resolver of last call\nlet resolve = (a: String | null) => {\n  console.log(\n    `default resolve function called, this should never happen: ${a}`\n  );\n};\n\n// Log a message when broadcast is requested\nnativeEmitter.addListener('onBroadcastRequested', () => {\n  console.log(`Broadcast requested`);\n});\n\n// Resolve promise when broadcast is started (this event means that user confirmed the screenshare)\nnativeEmitter.addListener('onBroadcastStarted', () => {\n  console.log(`Broadcast onBroadcastStarted`);\n  resolve(null);\n});\n\n// Entry point of this method\nfunction initializeScreenShare(instanceId: Number) {\n  return new Promise((res, rej) => {\n    // store the resolver for later call (when event is received)\n    resolve = res;\n\n    try {\n      // call native swift method that triggers the broadcast popup\n      console.log(`[${instanceId}] - >nativeInitializeScreenShare`);\n      nativeInitializeScreenShare();\n    } catch (e) {\n      rej(`Call to nativeInitializeScreenShare failed zzy`);\n    }\n  });\n}\n\nexport default initializeScreenShare;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA;AACA,IAAIA,OAAO,GAAIC,CAAD,IAAsB;EAClCC,OAAO,CAACC,GAAR,CACG,8DAA6DF,CAAE,EADlE;AAGD,CAJD,C,CAMA;;;AACAG,gBAAA,CAAcC,WAAd,CAA0B,sBAA1B,EAAkD,MAAM;EACtDH,OAAO,CAACC,GAAR,CAAa,qBAAb;AACD,CAFD,E,CAIA;;;AACAC,gBAAA,CAAcC,WAAd,CAA0B,oBAA1B,EAAgD,MAAM;EACpDH,OAAO,CAACC,GAAR,CAAa,8BAAb;EACAH,OAAO,CAAC,IAAD,CAAP;AACD,CAHD,E,CAKA;;;AACA,SAASM,qBAAT,CAA+BC,UAA/B,EAAmD;EACjD,OAAO,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;IAC/B;IACAV,OAAO,GAAGS,GAAV;;IAEA,IAAI;MACF;MACAP,OAAO,CAACC,GAAR,CAAa,IAAGI,UAAW,kCAA3B;MACA,IAAAI,8CAAA;IACD,CAJD,CAIE,OAAOC,CAAP,EAAU;MACVF,GAAG,CAAE,gDAAF,CAAH;IACD;EACF,CAXM,CAAP;AAYD;;eAEcJ,qB"}